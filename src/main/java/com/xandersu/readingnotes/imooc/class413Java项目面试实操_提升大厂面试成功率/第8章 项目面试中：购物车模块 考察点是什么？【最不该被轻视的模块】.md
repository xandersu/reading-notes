# 第8章 项目面试中：购物车模块 考察点是什么？【最不该被轻视的模块】

### 购物车数据要不要持久化？

- 购物车中的数据需要长期保存，所以把购物车数据缓存起来，会增大内存的压力
- 推荐使用MySQL或者mongoDB保存购物车数据
  - 购物车需要叠加很多业务使用MySQL
  - MySQL挂载多块硬盘，将数据库的数据切分存储在多块硬盘上
  - MySQL集群、读写分离
  - 分库分表、冷热数据分离

### 购物车对用户的作用

- 暂存商品
- 合并下单
- 批量支付
- 对比价格

### 购物车对商家的作用

- 库存提醒
- 促进消费
- 猜测喜好

### 没有购物车的电商案例

拼多多

### 购物车的设计元素

购物侧中的商品数量是SKU的种类而不是商品总数

购物车顶部放置优惠券、包邮信息



## 面试题

1. 购物车在电商系统的重要意义？

   - 对用户的好处

   1. 展示存放商品、统一下单比如等到促销是一起下单
   2. 合并下单，一个订单包含多个商品
   3. 批量支付，不用为每一个商品单独付款
   4. 方便对比价格，放入购物车时的价格和当前价格对比

   - 对商家的好处

   1. 提醒库存，根据商品实际库存提醒商家
   2. 促进消费，在购物车顶部放促销消息
   3. 猜测用户喜好

2. 购物车怎么引导用户消费

   1. 放置促销信息，领取优惠券可以减免现金
   2. 比价的功能，周期性涨价和降价
   3. 大数据推测用户喜好
   4. 显示商品库存紧张，鼓励用户购买

3. 怎么向用户推荐商品

   这个功能没做过。

   使用大数据技术收集并分析用户喜好。

   利用数据库的主从同步，将数据同步到从库，编写程序从从库读取数据，交给大数据的协同过滤算法推测用户的喜好。为了降低负担，我会只对每天新添加的数据进行计算，商城首页，商品详情页的底部，以及购物车的底部放置商品。

4. 用户不登录系统，能不能用购物车？怎么设计？

   可以。如果不登录，购物车的数据保存在小程序本地而不是后端的服务器，H5有local storage存放数据，当用户创建订单时，再要求用户登陆系统，把小程序存储的数据提交到后端数据库，再去创建订单。

5. 离线购物车的优缺点？

   离线购物车数据是本地的。

   优点是不登录系统就能用购物车模块，购物车删减商品不需要向后端发送请求。

   缺点是用户登录后，离线和在线的数据合并会有问题。推荐系统无法根据离线公务车的数据向顾客推荐商品。

6. 用户向购物车添加商品有没有上限？

   查询实际库存数量，如果库存紧张，在购物车标注；如果添加数量，上限就是商品的库存数量。

7. 怎么设计库存告警系统？

   利用mysql主从同步，把数据同步到一个从库，分析这个用户收场了哪些商品，结合商家的实际库存给出告警信息。

8. 购物车的商品种类有没有上限？

   *不涉及上限，存储数据是负担，淘宝是120*

   有上限的，淘宝是120，我们保持一致，方便以后用大数据计算用户喜好和对商户进行预警。

9. 怎么设计拆分订单？

   大型B2C商城会有很多仓库，按照发货仓库拆分订单，相同的发货仓库拆成一个订单；有些商城支持不同的仓库发货，计算最近的仓库。

   按商铺拆分订单。

   但是快递包裹数量和订单数量不一定相同。包裹拆分商城不一定做。

10. 购物车里的商品怎么排序？

    B2C按收藏时间排序

    C2C结合店铺，一个店铺几个商品添加时间很大也放在开头。

















