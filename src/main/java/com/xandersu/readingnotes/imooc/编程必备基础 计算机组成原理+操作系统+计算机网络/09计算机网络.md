# 09 计算机网络

**什么是计算机网络** 

计算机网络主要由一些通用的、可编程的硬件互连 而成，通过这些硬件，可以传送不同类型的数据， 并且可以支持广泛和日益增长的应用。 

- 计算机网络的不是软件概念，还包含硬件设备
- 计算机网络不仅仅是信息通信，还可以支持广泛的应用 

**计算机网络的分类** 

网络的作用范围:

- 广域网(WAN ) 			 		
- 城域网(MAN) 
- 局域网(LAN) 

| 分类   | 英文                     | 范围           | 区域       |
| ------ | ------------------------ | -------------- | ----|
| 广域网 | WAN(Wide Area Network)   | 几十到几千公里 | 跨省、跨国 |
| 城域网 | MAN(Metro. Area Network) | 5KM-50KM    | 城市间     |
| 局域网 | LAN(Local Area Network)  | 1KM以内    | 地区内 |

**网络的使用者** 

- 公用网络 
- 专用网络 

**互联网的发展历史** 

1. 第一阶段: 单个网络ARPANET 
2. 第二阶段:三级结构互联网
3. 第三阶段: 多层次ISP互联网 

# **计算机网络的层次结构** 

## **层次结构设计的基本原则** 

**分层实现不同的功能** 

- 保证数据通路顺畅 
- 识别目的计算机 
- 目的计算机状态 
- 数据是否错误 

**基本原则**

- 各层之间是相互独立的 
- 每一层要有足够的灵活性 
- 各层之间完全解耦 

### OSI七层模型 

应用层——为计算机用户提供接口和服务 

表示层——数据处理(编码解码、加密解密等) 

会话层——管理(建立、维护、重连)通信会话 

传输层——管理端到端的通信连接 

网络层——数据路由(决定数据在网络的路径)

数据链路层——管理相邻节点之间的数据通信 

物理层——数据通信的光电物理特性

- OSI欲成为全球计算机都遵循的标准
- OSI在市场化过程中困难重重，TCP/IP在全球范围成功运行 
- OSI最终并没有成为广为使用的标准模型 
- OSI的专家缺乏实际经验
- OSI标准制定周期过长，按OSI标准生产的设备无法及时进入市场 
- OSI模型设计的并不合理，一些功能在多层中重复出现 

### TCP/IP四层模型 

应用层 （应用层 、表示层、会话层）——HTTP/FTP/... 

传输层（传输层）——TCP/UDP

网络层（网络层）  ——IP/ICMP 

网络接口层 （数据链路层、物理层）—— Ethernet/ARP/RARP 

### 计算机网络的性能指标 

|          | **bit** | **Byte** | **KB** | **MB**   | **GB**    | **TB** | **PB** | **EB**   |
| -------- | ------- | -------- | ------ | -------- | --------- | ------ | ------ | ----- |
| 名字     | 比特位  | 字节     | 千字节 | 兆字节   | 吉字节    | 太字节 | 拍字节 | 艾字节   |
| 比例     | -       | 8bits    | 1024B  | 1024KB   | 1024MB    | 1024GB | 1024TB | 1024PB   |
| 常见设备 | 门电路  | -   | 寄存器 | 高速缓存 | 内存/硬盘 | 硬盘   | 云硬盘 | 数据仓库 |



**网络常用单位为(Mbps)** 

100M/s = 100Mbps = 100Mbit/s 

100Mbit/s=(100/8)MB/s=12.5MB/s 

速率:bps=bit/s

**时延** 

- 发送时延 
  - =数据长度(𝑏𝑖𝑡)  ➗ 发送速率(𝑏𝑖𝑡/𝑠) （受限于计算机网卡 ）
- 排队时延
  -  数据包在网络设备中等待被处理的时间  
- 传播时延 
  - = 传输路径距离 ➗ 传播速率(𝑏𝑖𝑡/𝑠) （受限于传输介质 ）
- 处理时延 
  - 数据包到达设备或者目的机器被处理所需要的时间 

**总时延 = 发送时延 + 排队时延 + 传播时延 + 处理时延** 

**往返时间RTT** 

- RTT(Route-Trip Time)是评估网络质量的一项重要指标 

- RTT表示的是数据报文在端到端通信中的来回一次的时间 

- 通常使用ping命令查看RTT 

## 物理层概述

### **物理层的作用** 

- 连接不同的物理设备 
- 传输比特流 

### **信道的基本概念** 

- 信道是往一个方向传送信息的媒体
- 一条通信电路包含一个接收信道和一个发送信道 
- 单工通信信道 
  - 只能一个方向通信，没有反方向反馈的信道 
  - 有线电视、无线电收音机等等 
- 半双工通信信道 
  - 双方都可以发送和接收信息
  - 不能双方同时发送，也不能同时接收 
- 全双工通信信道 
  - 双方都可以同时发送和接收信息 

### 分用-复用技术

- 频分复用 
- 时分复用 
- 波分复用 
- 码分复用 



## 数据链路层概述 

### 封装成帧 

- 帧”是数据链路层数据的基本单位 
- 发送端在网络层的一段数据前后添加特定标记形成“帧” 
- 接收端根据前后特定标记识别出“帧” 
- 帧首部和尾部是特定的控制字符(特定比特流) 
- SOH: 00000001 
- EOT: 00000100 

帧首部  ——  “帧”的数据 （IP数据报）  ——  帧尾部 

### 透明传输 

- 透明”在计算机领域是非常重要的一个术语
- “一种实际存在的事物却又看起来不存在一样”
- “即是控制字符在帧数据中，但是要当做不存在的去处理” 
- 编程语言中“\”一般为转义字符 
- \n”、“\t”等控制字符
- \\”、“\\\\” 

### 差错监测 

- 物理层只管传输比特流，无法控制是否出错 
- 数据链路层负责起“差错监测”的工作 
- 奇偶校验码
- 循环冗余校验码CRC 
  - 一种根据传输或保存的数据而产生固定位数校验码的方法 
  - 检测数据传输或者保存后可能出现的错误
  - 生成的数字计算出来并且附加到数据后面 
  - 模“2”除法是二进制下的除法
  - 与算术除法类似，但除法不借位，实际是“异或”操作 
  - 选定一个用于校验的多项式G(x)，并在数据尾部添加r个0 
  - 将添加r个0后的数据，使用模“2”除法除以多项式的位串 
  - 得到的余数填充在原数据r个0的位置得到可校验的位串 
  - CRC的错误检测能力与位串的阶数r有关
  - 数据链路层只进行数据的检测，不进行纠正 

### 最大传输单元MTU 

#### MTU 

- 最大传输单元MTU(Maximum Transmission Unit) 
- 数据链路层的数据帧也不是无限大的 
- 数据帧过大或过小都会影响传输的效率
- 以太网MTU一般为1500字节 

####路径MTU 

路径MTU由链路中MTU的最小值决定 

####MAC地址

- MAC地址(物理地址、硬件地址) 
- 每一个设备都拥有唯一的MAC地址
- MAC地址共48位，使用十六进制表示 

## **以太网协议** 

- 以太网(Ethernet)是一种使用广泛的局域网技术 
- 以太网是一种应用于数据链路层的协议
- 使用以太网可以完成相邻设备的数据帧传输 



- A通过网卡发出数据帧
- 数据帧到达路由器，路由器取出前6字节
- 路由器匹配MAC地址表，找到对应的网络接口
- 路由器往该网络接口发送数据帧 
- E检查MAC地址表，发现没有C的信息
- E将广播A的数据包到除A以外的端口
- E将收到来自B、C的回应，并将地址记录 

