# 2-07 HTTP相关
## HTTP简介
### 超文本传输协议HTTP主要特点

- 支持客户/服务器模式
- 简单快速
- 灵活：content-type
- 无连接：每次连接处理一个请求，1.1开始默认使用长连接keepAlive
- 无状态：协议对于事务处理没有状态，需要前面的信息需要重传

### HTTP请求结构

HTTP请求报文  
请求方法 | 空格 | URL | 空格 | 协议版本 | 回车符 | 换行符 | 请求行 |

头部字段名 | ： | 值 | 回车符 | 换行符 | 请求头部 | | |

| ·································| 请求头部 |

头部字段名 | ： | 值 | 回车符 | 换行符 | 请求头部 | | |

| 回车符 | 换行符 |

| 请求正文 |

### 请求/相应的步骤

- 客户端连接到Web服务器
- 发送HTTP请求
- 服务接受请求并返回HTTP相应
- 释放连接TCP连接
- 客户端浏览器解析HTML内容

## 在浏览器地址栏输入URL，按下回车之后经历的流程
### 答案
- DNS解析 DNS缓存从近到远：浏览器缓存、系统缓存、路由器缓存、ips服务器缓存、根域名服务器缓存、顶级域名服务器缓存 
- TCP连接 三次握手
- HTTP请求
- 服务器处理请求并返回HTTP报文
- 浏览器解析渲染页面
- 连接结束
## HTTP状态吗
### 五种可能的取值
- 1xx：指示信息--表示请求已接收，继续处理
- 2xx：成功--表示请求已被成功接收、理解、接受
- 3xx：重定向--要完成请求必须进行更进一步的操作
- 4xx：客户端错误--请求有语法错误或请求无法实现
- 5xx：服务端错误--服务器未能实现合法的请求
### 常见状态码
- 200 OK：正常饭回信息
- 400 Bad Request:客户端请求有语法错误，不能被服务器所理解
- 401 Unauthorized:请求未授权，这个状态吗必须和WWW-Authenticate报头域一起使用
- 403 Forbidden：服务器收到请求，但是拒绝提供服务
- 404 Not Found：请求的资源不存在，eg，输入了错误的URL
- 500 Internal Server Error：服务器发生不可预期的错误
- 503 Server Unavailable:服务器当前不能处理客户端的请求，一段时间后可能恢复正常

## GET请求和POST请求区别
### 三个层面来解答
- HTTP报文层面：GET将请求信息放在URL，POST请求放在报文体中
- 数据库层面：GET符合幂等性和安全性，POST不符合
- 其他层面：GET可以被缓存、被存储，而POST不行

## Cookie和Session的区别
### Cookie简介
- 是由服务器发给客户端的特殊信息，以文本的形式存放在客户端
- 客户端再次请求的时候，会把Cookie回发
- 服务器接收到后，会解析Cookie生成与客户端相对应的内容
### Cookie的设置以及发送过程
1. 客户端发送HTTP请求到服务端
2. 服务端发送HTTP相应到客户端，包括Set-Cookie的头部
3. 客户端发送HTTP请求到服务端，包括了Cookie头部
4. 服务端发送HTTP相应

### Session简介

- 服务端的机制，在服务器上保存信息
- 解析客户端请求并操作session id，按需保存状态信息

### Session的实现方式

- 使用Cookie来实现

   1.客户端 request
   2.服务端 response Set-Cookie:JSESSIONID=XXX
   3.客户端 request Cookie:JSESSIONID=XXX
   4.服务端 response
   
- 使用URL回写来实现：URL写在JSESSIONID的参数

### Cookie和Session的区别
- Cookie数据存放在客户的浏览器上，Session数据放在服务器上
- Session比Cookie更安全
- 若考虑减轻服务器负担，应当使用Cookie






