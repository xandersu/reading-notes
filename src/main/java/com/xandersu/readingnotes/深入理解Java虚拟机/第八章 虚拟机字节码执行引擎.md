# 第八章 虚拟机字节码执行引擎

## 8.1 概述

执行引擎是JVM最核心的组成部分之一。

物理机的执行引擎是直接建立在处理器、硬件、指令集和操作系统层面上的。

虚拟机的执行引擎由自己实现，可以自行定制指令集和执行引擎的结构体系，能够执行不被硬件直接支持的指令集格式。 

JVM规范中制定了虚拟机字节码执行引擎的概念模型，称为各个虚拟机执行引擎的统一外观(Facade

)。在不同的虚拟机实现里，执行引擎在执行Java代码时可能会有解释执行(通过解释器执行)和编译执行(通过即时编译器产生本地代码执行)两种选择，也可能两者兼备，也可能包含几个不同级别的编译器执行引擎。但外观上看，所有JVM的执行引擎都是一致的：输入的是字节码文件，处理过程是字节码解析的等效过程，输出的是执行结果。

## 8.2 运行时栈帧结构

栈帧(Stack Frame)是用于支持虚拟机进行方法调用和方法执行的数据结构，是虚拟机运行时数据区中的虚拟机栈(Virtual Machine Stack)的栈元素。栈帧存储了方法的局部变量表、操作数栈、动态链接和方法返回地址等信息。每一个方法从调用开始到执行完成的过程，都对应着一个栈帧在虚拟机栈里面从入栈到出栈的过程。

